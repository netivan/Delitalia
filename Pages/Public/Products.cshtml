@page
@model DelliItalia_Razor.Pages.Public.ProductsModel

@{
    ViewData["Title"] = "Products";
}
<h1>Produkter</h1>
<br />
<td>
    <input id="btnMestValda" type="button" value="Mest Valda Produkter" hidden />
    <input id="btnNyaste" type="button" value="Nyaste produkter" hidden />
    <input id="btnReaProdukt" type="button" value="Rea Produkter" hidden />
</td>

<td>
    <br /><br />
    <h4>Kategorier:</h4>
    <a href="?Category="><button>Återställ</button></a>
    <a href="?Ekologisk=True"><Button style="color:forestgreen" runat="server" onclick="GetEco"> Ekologisk</Button></a>
    <a href="?Category=Pasta"><button> Pasta </button></a>
    <a href="?Category=Chark"><button> Salumi (Chark) </button></a>
    <a href="?Category=Ost"><button> Formaggio (Ost) </button></a>
    <a href="?Category=Övrigt"><button> Övriga Produkter</button></a> <br />
    <p style="color:red"> @ViewData["IngaProd"] </p>
</td>
<br /> 

@*<div class="card-deck">
    @foreach(var item in Model.ProductModel)
    {
        <partial name="_DisplayProductPartial" model="item" />
    }

</div>*@
    
    
    
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].PhotoAdress)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Price)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Description)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Category)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Quantity)
                </th>
                <th hidden>
                    @Html.DisplayNameFor(model => model.ProductModel[0].Chosen)
                </th>

                <th style="font-size:1em; color:forestgreen;">
                    @Html.DisplayNameFor(model => model.ProductModel[0].Eco)
                </th>

                @if ((Model.ProductModel.Count != 0) && (Model.ProductModel[0].Sale != 0))
                {
                    <th>
                        @Html.DisplayNameFor(model => model.ProductModel[0].Sale)
                    </th>
                }
                @if ((Model.ProductModel.Count != 0) && (Model.ProductModel[0].Sale_Percent != 0))
                {
                    <th>
                        @Html.DisplayNameFor(model => model.ProductModel[0].Sale_Percent)
                    </th>
                }
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.ProductModel)
            {
                <tr>
                    <td>
                        <img src="~/ImageProduct/@item.PhotoNamn"
                             height="80" width="80" />
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Price)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Category)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td hidden>
                        @Html.DisplayFor(modelItem => item.Chosen)
                    </td>

                    @if (item.Eco == true)
                    {
                        <td style="font:1em; color:forestgreen">
                            @Html.DisplayNameFor(modelItem => item.Eco)
                        </td>
                    }
                    else
                    {
                        <td style="font:1em; color:black">
                            @Html.DisplayFor(modelItem => item.Eco) -----
                        </td>
                    }

                    @if (item.Sale != 0)
                    {
                        <td style="color:red">
                            @Html.DisplayFor(modelItem => item.Sale) rea i kronor
                        </td>
                    }
                    @if (item.Sale_Percent != 0)
                    {
                        <td style="color:red">
                            @Html.DisplayFor(modelItem => item.Sale_Percent)  rea i Procent
                        </td>
                    }
                    <td>

                        <a asp-page="/Public/PublicDetalj" asp-route-id="@item.Id">Detalj</a> |
                        <a asp-page="CartPage" asp-route-id="@item.Id">Köp</a><br />
                        <div class="col-sm" style="width:150px">
                            <a asp-page="" asp-route-id="@item.Id">Minus</a>
                            <input id="Antal" type="number" style="width:30px" />
                            <a asp-page="" asp-route-id="@item.Id">Plus</a>
                        </div>

                    </td>
                </tr>
            }
        </tbody>
    </table>
